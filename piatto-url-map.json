{
  "name": "piatto-url-map",
  "defaultService": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendBuckets/frontend-bucket",
  "hostRules": [
    {
      "hosts": ["*"],
      "pathMatcher": "piatto-matcher"
    },
    {
      "hosts": ["piatto-cooks.com", "www.piatto-cooks.com"],
      "pathMatcher": "piatto-matcher"
    }
  ],
  "pathMatchers": [
    {
      "name": "piatto-matcher",
      "defaultService": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendBuckets/frontend-bucket",
      "routeRules": [
        {
          "priority": 1,
          "matchRules": [
            {
              "prefixMatch": "/api/"
            }
          ],
          "service": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendServices/fastapi-backend-service"
        },
        {
          "priority": 2,
          "matchRules": [
            {
              "prefixMatch": "/assets/"
            }
          ],
          "service": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendBuckets/frontend-bucket"
        },
        {
          "priority": 3,
          "matchRules": [
            { "fullPathMatch": "/favicon.ico" },
            { "fullPathMatch": "/robots.txt" },
            { "fullPathMatch": "/manifest.webmanifest" },
            { "fullPathMatch": "/apple-touch-icon.png" },
            { "fullPathMatch": "/vite.svg" }
          ],
          "service": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendBuckets/frontend-bucket"
        },
        {
          "priority": 1000,
          "matchRules": [
            {
              "prefixMatch": "/"
            }
          ],
          "routeAction": {
            "urlRewrite": {
              "pathRewrite": "/index.html"
            }
          },
          "service": "https://www.googleapis.com/compute/v1/projects/cloud-run-hackathon-475303/global/backendBuckets/frontend-bucket"
        }
      ]
    }
  ]
}